# imp-rpc

imp-rpc 是一个 RPC 框架，适合新手学习使用。

# 实现

## 服务注册

服务注册默认采用 zookeeper 作为注册中心。默认路径为：imp/rpc/{applicationName}/{interfaceName}/[provider,consumer]


## 服务发现
服务发现时，会根据配置选择 是进行点对点调用，还是 通过负载均衡进行服务发现

## 协议实现

默认实现为 ImpProtocol 协议。协议设定如下：

| 魔数:2 byte | 协议版本号:1 byte | 序列化算法:1 byte | 请求类型:1 byte | 请求状态:1 byte | 请求参数/返回值长度:4byte | 请求参数/返回值:长度不定 |

默认采用 netty 进行网络交互，数据序列化默认采用 JSON。可以通过配置进行指定（目前仅支持JSON）。

使用 SPI 机制，根据配置选择不同的实现方式。

# 结构

## 分层

RPC 主要是分为了 三个部分

- 配置层
    - 暴露配置服务
        - 服务提供者
        - 服务消费者
    - 配置 配置中心
- 网关层
    - 发送请求
    - 接受请求
    - 请求匹配（接收到的 请求 和 发出的请求）
- RPC层
    - 负载均衡
    - 服务发现
    - 服务注册
    - 心跳检测

## 核心接口

### RPC 接口

### 网关接口

### 配置接口